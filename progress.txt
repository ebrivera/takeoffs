## Codebase Patterns
- Python 3.11+ with pydantic v2 for domain models
- Project lives in `backend/` — source in `backend/cantena/`, tests in `backend/tests/`
- Quality gates: `pytest`, `mypy --strict cantena`, `ruff check cantena tests` (run from backend/ with venv activated)
- Use `source .venv/bin/activate` before running any Python tooling
- Frontend lives in `frontend/` — Next.js 14+ App Router with TypeScript strict mode
- Frontend quality gates: `npm run typecheck`, `npm run lint` (run from frontend/)
- Landing page at `/` is out of scope — product work lives under `/analyze` route
- Cost engine foundation (PRD 1) is complete — all models, engine, data, and formatting in `cantena/`
- Frontend types in `frontend/src/lib/types.ts` must mirror Python models exactly (enums as TS enums, interfaces for Pydantic models)
- Frontend API client in `frontend/src/lib/api.ts` — typed fetch wrappers
- `npm install` required before running quality gates (node_modules not committed)
- Use `npm run typecheck` and `npm run lint` from `frontend/` directory

---

## 2026-02-07 - US-101
- What was implemented: Frontend scaffolding — added typecheck script, TypeScript interfaces matching all Python Pydantic models, typed API fetch wrapper, and /analyze page entry point.
- Files changed:
  - `frontend/package.json` — added `typecheck: "tsc --noEmit"` script
  - `frontend/src/lib/types.ts` — TypeScript enums and interfaces for BuildingType, StructuralSystem, ExteriorWall, MechanicalSystem, ElectricalService, FireProtection, Confidence, Location, ComplexityScores, BuildingModel, CostRange, DivisionCost, Assumption, BuildingSummary, EstimateMetadata, CostEstimate
  - `frontend/src/lib/api.ts` — `analyzePlan(file, location)` fetch wrapper targeting POST /api/analyze
  - `frontend/src/app/analyze/page.tsx` — minimal product analysis page at /analyze route
- **Learnings for future iterations:**
  - Node modules must be installed first (`npm install` from frontend/) before running quality gates
  - TypeScript enums match Python StrEnum values exactly — use string values not uppercase keys
  - `generated_at` is `string` in TS (JSON serialized datetime) not Date object
  - Path alias `@/*` maps to `./src/*` — use `@/lib/types` for imports
  - The PRD says `frontend/lib/types.ts` but actual path is `frontend/src/lib/types.ts` (under src/ per Next.js App Router convention)
---

